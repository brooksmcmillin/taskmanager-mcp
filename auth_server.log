INFO:__main__:TaskManager URL: http://localhost:4322
INFO:__main__:Using OAuth client ID: 29f313fea1d8d39653453ce1fdbd4be1
INFO:taskmanager_oauth_provider:Initialized TaskManager OAuth provider for http://localhost:4322
INFO:__main__:ðŸš€ MCP Authorization Server running on http://localhost:9000/
INFO:     Started server process [67475]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://localhost:9000 (Press CTRL+C to quit)
INFO:     ::1:60316 - "GET /.well-known/oauth-protected-resource HTTP/1.1" 404 Not Found
INFO:     ::1:60316 - "GET /.well-known/oauth-authorization-server HTTP/1.1" 200 OK
INFO:taskmanager_oauth_provider:Registered OAuth client: 4e698da5-c064-43aa-8c40-44bf70118b6f
INFO:     ::1:60316 - "POST /register HTTP/1.1" 201 Created
INFO:taskmanager_oauth_provider:Generated authorization URL: http://localhost:4322/api/oauth/authorize?client_id=29f313fea1d8d39653453ce1fdbd4be1&redirect_uri=http%3A%2F%2Flocalhost%3A9000%2Foauth%2Fcallback&response_type=code&scope=read&state=Q7s28tOH2W8nDSQsUIBQjLSeiqrytnXc68xQ1Zh6m5I&code_challenge=TerHs6wNhCXNrJ3YMQwn-reYoOXDPXjKGQ4GiO-L6ko&code_challenge_method=S256
INFO:     127.0.0.1:48504 - "GET /authorize?response_type=code&client_id=4e698da5-c064-43aa-8c40-44bf70118b6f&redirect_uri=http%3A%2F%2Flocalhost%3A3030%2Fcallback&state=Q7s28tOH2W8nDSQsUIBQjLSeiqrytnXc68xQ1Zh6m5I&code_challenge=TerHs6wNhCXNrJ3YMQwn-reYoOXDPXjKGQ4GiO-L6ko&code_challenge_method=S256&scope=read HTTP/1.1" 302 Found
INFO:taskmanager_oauth_provider:Exchanging token at http://localhost:4322/api/oauth/token with data: {'grant_type': 'authorization_code', 'code': '2928cb30b95a7fc49a2b0bc2a1117f4b55f30667354ae684be19adde3756d840', 'client_id': '29f313fea1d8d39653453ce1fdbd4be1', 'client_secret': '3635875c7bb1d42934877323c2686639042e766f155e406f8f64fb2dc3d466bf', 'redirect_uri': 'http://localhost:9000/oauth/callback'}
ERROR:taskmanager_oauth_provider:Token exchange failed: 400 - {"error":"invalid_request","error_description":"Code verifier required for PKCE"}
ERROR:taskmanager_oauth_provider:Request data was: {'grant_type': 'authorization_code', 'code': '2928cb30b95a7fc49a2b0bc2a1117f4b55f30667354ae684be19adde3756d840', 'client_id': '29f313fea1d8d39653453ce1fdbd4be1', 'client_secret': '3635875c7bb1d42934877323c2686639042e766f155e406f8f64fb2dc3d466bf', 'redirect_uri': 'http://localhost:9000/oauth/callback'}
ERROR:taskmanager_oauth_provider:Error handling OAuth callback: 400: Token exchange failed: 400
INFO:     127.0.0.1:48504 - "GET /oauth/callback?code=2928cb30b95a7fc49a2b0bc2a1117f4b55f30667354ae684be19adde3756d840&state=Q7s28tOH2W8nDSQsUIBQjLSeiqrytnXc68xQ1Zh6m5I HTTP/1.1" 500 Internal Server Error
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [67475]
INFO:__main__:TaskManager URL: http://localhost:4322
INFO:__main__:Using OAuth client ID: 29f313fea1d8d39653453ce1fdbd4be1
INFO:taskmanager_oauth_provider:Initialized TaskManager OAuth provider for http://localhost:4322
INFO:__main__:ðŸš€ MCP Authorization Server running on http://localhost:9000/
INFO:     Started server process [68381]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://localhost:9000 (Press CTRL+C to quit)
INFO:     ::1:33226 - "GET /.well-known/oauth-protected-resource HTTP/1.1" 404 Not Found
INFO:     ::1:33226 - "GET /.well-known/oauth-authorization-server HTTP/1.1" 200 OK
INFO:taskmanager_oauth_provider:Registered OAuth client: 512c7d47-717f-4147-a395-6d72f18ee464
INFO:     ::1:33226 - "POST /register HTTP/1.1" 201 Created
INFO:taskmanager_oauth_provider:Generated authorization URL: http://localhost:4322/api/oauth/authorize?client_id=29f313fea1d8d39653453ce1fdbd4be1&redirect_uri=http%3A%2F%2Flocalhost%3A9000%2Foauth%2Fcallback&response_type=code&scope=read&state=h22_okcxNxJYE_xe7EchFIEjYUpwnFkjX-vj3CZRpa0&code_challenge=-BL6aNjbBFsYtj9wtzYUZcygBLqLk7Gw4JqFmBzRVvk&code_challenge_method=S256
INFO:     127.0.0.1:47044 - "GET /authorize?response_type=code&client_id=512c7d47-717f-4147-a395-6d72f18ee464&redirect_uri=http%3A%2F%2Flocalhost%3A3030%2Fcallback&state=h22_okcxNxJYE_xe7EchFIEjYUpwnFkjX-vj3CZRpa0&code_challenge=-BL6aNjbBFsYtj9wtzYUZcygBLqLk7Gw4JqFmBzRVvk&code_challenge_method=S256&scope=read HTTP/1.1" 302 Found
INFO:taskmanager_oauth_provider:Exchanging token at http://localhost:4322/api/oauth/token with data: {'grant_type': 'authorization_code', 'code': '5aa12a1df14b7542829c3c0767f08141a3f5aaaf12cc5e35c61086850dcb30e2', 'client_id': '29f313fea1d8d39653453ce1fdbd4be1', 'client_secret': '3635875c7bb1d42934877323c2686639042e766f155e406f8f64fb2dc3d466bf', 'redirect_uri': 'http://localhost:9000/oauth/callback'}
ERROR:taskmanager_oauth_provider:Token exchange failed: 400 - {"error":"invalid_request","error_description":"Code verifier required for PKCE"}
ERROR:taskmanager_oauth_provider:Request data was: {'grant_type': 'authorization_code', 'code': '5aa12a1df14b7542829c3c0767f08141a3f5aaaf12cc5e35c61086850dcb30e2', 'client_id': '29f313fea1d8d39653453ce1fdbd4be1', 'client_secret': '3635875c7bb1d42934877323c2686639042e766f155e406f8f64fb2dc3d466bf', 'redirect_uri': 'http://localhost:9000/oauth/callback'}
ERROR:taskmanager_oauth_provider:Error handling OAuth callback: 400: Token exchange failed: 400
INFO:     127.0.0.1:47044 - "GET /oauth/callback?code=5aa12a1df14b7542829c3c0767f08141a3f5aaaf12cc5e35c61086850dcb30e2&state=h22_okcxNxJYE_xe7EchFIEjYUpwnFkjX-vj3CZRpa0 HTTP/1.1" 500 Internal Server Error
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [68381]
INFO:__main__:TaskManager URL: http://localhost:4322
INFO:__main__:Using OAuth client ID: 29f313fea1d8d39653453ce1fdbd4be1
INFO:taskmanager_oauth_provider:Initialized TaskManager OAuth provider for http://localhost:4322
INFO:__main__:ðŸš€ MCP Authorization Server running on http://localhost:9000/
INFO:     Started server process [68630]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://localhost:9000 (Press CTRL+C to quit)
INFO:     ::1:40572 - "GET /.well-known/oauth-protected-resource HTTP/1.1" 404 Not Found
INFO:     ::1:40572 - "GET /.well-known/oauth-authorization-server HTTP/1.1" 200 OK
INFO:taskmanager_oauth_provider:Registered OAuth client: 4942de36-48a7-496e-9128-80b51ff94e07
INFO:     ::1:40572 - "POST /register HTTP/1.1" 201 Created
INFO:taskmanager_oauth_provider:Generated authorization URL: http://localhost:4322/api/oauth/authorize?client_id=29f313fea1d8d39653453ce1fdbd4be1&redirect_uri=http%3A%2F%2Flocalhost%3A9000%2Foauth%2Fcallback&response_type=code&scope=read&state=Rw69mJ7t0Q_ohqfpcyMN_KCUkPbaULd1kw-nVOt7My0
INFO:     127.0.0.1:39266 - "GET /authorize?response_type=code&client_id=4942de36-48a7-496e-9128-80b51ff94e07&redirect_uri=http%3A%2F%2Flocalhost%3A3030%2Fcallback&state=Rw69mJ7t0Q_ohqfpcyMN_KCUkPbaULd1kw-nVOt7My0&code_challenge=9KTUXEQDi_EdjT21VkKSOkm8WZib0CZk34O8VAQsbuU&code_challenge_method=S256&scope=read HTTP/1.1" 302 Found
INFO:taskmanager_oauth_provider:Exchanging token at http://localhost:4322/api/oauth/token with data: {'grant_type': 'authorization_code', 'code': 'd37728ff4c05ba77d40a3f6a67c34735f092d1c25bc93475783c48b346ec25ab', 'client_id': '29f313fea1d8d39653453ce1fdbd4be1', 'client_secret': '3635875c7bb1d42934877323c2686639042e766f155e406f8f64fb2dc3d466bf', 'redirect_uri': 'http://localhost:9000/oauth/callback'}
ERROR:taskmanager_oauth_provider:No access token in response
ERROR:taskmanager_oauth_provider:Error handling OAuth callback: 400: No access token received
INFO:     127.0.0.1:39266 - "GET /oauth/callback?code=d37728ff4c05ba77d40a3f6a67c34735f092d1c25bc93475783c48b346ec25ab&state=Rw69mJ7t0Q_ohqfpcyMN_KCUkPbaULd1kw-nVOt7My0 HTTP/1.1" 500 Internal Server Error
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [68630]
INFO:__main__:TaskManager URL: http://localhost:4322
INFO:__main__:Using OAuth client ID: 29f313fea1d8d39653453ce1fdbd4be1
INFO:taskmanager_oauth_provider:Initialized TaskManager OAuth provider for http://localhost:4322
INFO:__main__:ðŸš€ MCP Authorization Server running on http://localhost:9000/
INFO:     Started server process [68867]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://localhost:9000 (Press CTRL+C to quit)
INFO:     ::1:36306 - "GET /.well-known/oauth-protected-resource HTTP/1.1" 404 Not Found
INFO:     ::1:36306 - "GET /.well-known/oauth-authorization-server HTTP/1.1" 200 OK
INFO:taskmanager_oauth_provider:Registered OAuth client: 907ff6a2-4ce7-4f42-b858-4ddad132ff04
INFO:     ::1:36306 - "POST /register HTTP/1.1" 201 Created
INFO:taskmanager_oauth_provider:Generated authorization URL: http://localhost:4322/api/oauth/authorize?client_id=29f313fea1d8d39653453ce1fdbd4be1&redirect_uri=http%3A%2F%2Flocalhost%3A9000%2Foauth%2Fcallback&response_type=code&scope=read&state=jHt7svY_96GE_Gdgq4-hOZdGMG08jE0LYHu0rhECMak
INFO:     127.0.0.1:43954 - "GET /authorize?response_type=code&client_id=907ff6a2-4ce7-4f42-b858-4ddad132ff04&redirect_uri=http%3A%2F%2Flocalhost%3A3030%2Fcallback&state=jHt7svY_96GE_Gdgq4-hOZdGMG08jE0LYHu0rhECMak&code_challenge=N5LVUdlwad0f-xryiFW7z-B5lVqM0DZEnlyRaEnuRSs&code_challenge_method=S256&scope=read HTTP/1.1" 302 Found
INFO:taskmanager_oauth_provider:Exchanging token at http://localhost:4322/api/oauth/token with data: {'grant_type': 'authorization_code', 'code': '4a5cca8198e26756b88bbc666f1a7d9c16c8db7e0e1cc7b19d4defcb2591c0cd', 'client_id': '29f313fea1d8d39653453ce1fdbd4be1', 'client_secret': '3635875c7bb1d42934877323c2686639042e766f155e406f8f64fb2dc3d466bf', 'redirect_uri': 'http://localhost:9000/oauth/callback'}
INFO:taskmanager_oauth_provider:Token response from TaskManager: {'token_type': 'Bearer', 'expires_in': 3600, 'refresh_token': 'ebc12d49541d456d3a9675ec77b465ff73d73fc6232791907bfabf4e20335184', 'scope': 'read'}
ERROR:taskmanager_oauth_provider:No access token in response. Full response: {'token_type': 'Bearer', 'expires_in': 3600, 'refresh_token': 'ebc12d49541d456d3a9675ec77b465ff73d73fc6232791907bfabf4e20335184', 'scope': 'read'}
ERROR:taskmanager_oauth_provider:Error handling OAuth callback: 400: No access token received
INFO:     127.0.0.1:43954 - "GET /oauth/callback?code=4a5cca8198e26756b88bbc666f1a7d9c16c8db7e0e1cc7b19d4defcb2591c0cd&state=jHt7svY_96GE_Gdgq4-hOZdGMG08jE0LYHu0rhECMak HTTP/1.1" 500 Internal Server Error
INFO:     ::1:34346 - "GET /.well-known/oauth-protected-resource HTTP/1.1" 404 Not Found
INFO:     ::1:34346 - "GET /.well-known/oauth-authorization-server HTTP/1.1" 200 OK
INFO:taskmanager_oauth_provider:Registered OAuth client: 833212cb-a614-414c-8fba-29ad253b3a62
INFO:     ::1:34346 - "POST /register HTTP/1.1" 201 Created
INFO:taskmanager_oauth_provider:Generated authorization URL: http://localhost:4322/api/oauth/authorize?client_id=29f313fea1d8d39653453ce1fdbd4be1&redirect_uri=http%3A%2F%2Flocalhost%3A9000%2Foauth%2Fcallback&response_type=code&scope=read&state=vLpl5s8KmYHdw7QmNin9RE8LTppVowfrJ25O8q5x1es
INFO:     127.0.0.1:51938 - "GET /authorize?response_type=code&client_id=833212cb-a614-414c-8fba-29ad253b3a62&redirect_uri=http%3A%2F%2Flocalhost%3A3030%2Fcallback&state=vLpl5s8KmYHdw7QmNin9RE8LTppVowfrJ25O8q5x1es&code_challenge=-fnBZyppWV1z-NUiNBtBp5yhjUR_cO_wEftN0H5qFpk&code_challenge_method=S256&scope=read HTTP/1.1" 302 Found
INFO:taskmanager_oauth_provider:Exchanging token at http://localhost:4322/api/oauth/token with data: {'grant_type': 'authorization_code', 'code': '54190639c158f5ab81c6725f9769b722130bbaf6b3e0d4db43972aa99ade7baf', 'client_id': '29f313fea1d8d39653453ce1fdbd4be1', 'client_secret': '3635875c7bb1d42934877323c2686639042e766f155e406f8f64fb2dc3d466bf', 'redirect_uri': 'http://localhost:9000/oauth/callback'}
INFO:taskmanager_oauth_provider:Token response from TaskManager: {'access_token': 'cb7e9cfbe17495fbe19ab7a683a9fc0645ff91dc392e609a0592362bfee99906', 'token_type': 'Bearer', 'expires_in': 3600, 'refresh_token': '56218496a97d4338a9ba5e89a3a9ad78c7df4741869e9df7c593fff1028b2021', 'scope': 'read'}
INFO:taskmanager_oauth_provider:Successfully exchanged code for access token
INFO:     127.0.0.1:51938 - "GET /oauth/callback?code=54190639c158f5ab81c6725f9769b722130bbaf6b3e0d4db43972aa99ade7baf&state=vLpl5s8KmYHdw7QmNin9RE8LTppVowfrJ25O8q5x1es HTTP/1.1" 302 Found
INFO:taskmanager_oauth_provider:Issued MCP access token for client 833212cb-a614-414c-8fba-29ad253b3a62
INFO:     ::1:34346 - "POST /token HTTP/1.1" 200 OK
INFO:     ::1:43740 - "POST /introspect HTTP/1.1" 200 OK
INFO:     ::1:43744 - "POST /introspect HTTP/1.1" 200 OK
INFO:     ::1:42214 - "GET /.well-known/oauth-protected-resource HTTP/1.1" 404 Not Found
INFO:     ::1:42214 - "GET /.well-known/oauth-authorization-server HTTP/1.1" 200 OK
INFO:taskmanager_oauth_provider:Registered OAuth client: 5c870054-8d9b-40b5-9c80-fe5fd8bc4ccb
INFO:     ::1:42214 - "POST /register HTTP/1.1" 201 Created
INFO:taskmanager_oauth_provider:Generated authorization URL: http://localhost:4322/api/oauth/authorize?client_id=29f313fea1d8d39653453ce1fdbd4be1&redirect_uri=http%3A%2F%2Flocalhost%3A9000%2Foauth%2Fcallback&response_type=code&scope=read&state=Zz_aRHEsUwH1I9mL1hQldIJhdo8kUIY3l45Sm96_VDY
INFO:     127.0.0.1:50120 - "GET /authorize?response_type=code&client_id=5c870054-8d9b-40b5-9c80-fe5fd8bc4ccb&redirect_uri=http%3A%2F%2Flocalhost%3A3030%2Fcallback&state=Zz_aRHEsUwH1I9mL1hQldIJhdo8kUIY3l45Sm96_VDY&code_challenge=9EOwDUvGUOOgXP-7Q8V103uDxYSpS9JbfM_JsxRLnnI&code_challenge_method=S256&scope=read HTTP/1.1" 302 Found
INFO:taskmanager_oauth_provider:Exchanging token at http://localhost:4322/api/oauth/token with data: {'grant_type': 'authorization_code', 'code': 'ba9d25a1b8513abd21740f241fb0bf99669c0a01a4424ac1ffdfa05a28039824', 'client_id': '29f313fea1d8d39653453ce1fdbd4be1', 'client_secret': '3635875c7bb1d42934877323c2686639042e766f155e406f8f64fb2dc3d466bf', 'redirect_uri': 'http://localhost:9000/oauth/callback'}
INFO:taskmanager_oauth_provider:Token response from TaskManager: {'access_token': '8b59aa6e74792e9b48d35994d70dab0ac0fbc8856043e4b71e35abbb165cddbc', 'token_type': 'Bearer', 'expires_in': 3600, 'refresh_token': '2097a1b325119ee7271e11422c8b7e57ef5a8974df159f0afba5cfed06796a3c', 'scope': 'read'}
INFO:taskmanager_oauth_provider:Successfully exchanged code for access token
INFO:     127.0.0.1:50120 - "GET /oauth/callback?code=ba9d25a1b8513abd21740f241fb0bf99669c0a01a4424ac1ffdfa05a28039824&state=Zz_aRHEsUwH1I9mL1hQldIJhdo8kUIY3l45Sm96_VDY HTTP/1.1" 302 Found
INFO:taskmanager_oauth_provider:Issued MCP access token for client 5c870054-8d9b-40b5-9c80-fe5fd8bc4ccb
INFO:     ::1:42214 - "POST /token HTTP/1.1" 200 OK
INFO:     ::1:40600 - "POST /introspect HTTP/1.1" 200 OK
INFO:     ::1:40602 - "POST /introspect HTTP/1.1" 200 OK
INFO:     ::1:38374 - "GET /.well-known/oauth-protected-resource HTTP/1.1" 404 Not Found
INFO:     ::1:38374 - "GET /.well-known/oauth-authorization-server HTTP/1.1" 200 OK
INFO:taskmanager_oauth_provider:Registered OAuth client: ec3bc0f1-58ee-454a-858d-4ff75a22ff7b
INFO:     ::1:38374 - "POST /register HTTP/1.1" 201 Created
INFO:taskmanager_oauth_provider:Generated authorization URL: http://localhost:4322/api/oauth/authorize?client_id=29f313fea1d8d39653453ce1fdbd4be1&redirect_uri=http%3A%2F%2Flocalhost%3A9000%2Foauth%2Fcallback&response_type=code&scope=read&state=vhessLRjzrvm3VGkMep7Nr3swx67AYp2iYBKqT5ncNA
INFO:     127.0.0.1:38190 - "GET /authorize?response_type=code&client_id=ec3bc0f1-58ee-454a-858d-4ff75a22ff7b&redirect_uri=http%3A%2F%2Flocalhost%3A3030%2Fcallback&state=vhessLRjzrvm3VGkMep7Nr3swx67AYp2iYBKqT5ncNA&code_challenge=wjYYNG0wNgX2Qvt6anagbmMxRVJOZ5CPWXbJg-dhhrk&code_challenge_method=S256&scope=read HTTP/1.1" 302 Found
INFO:taskmanager_oauth_provider:Exchanging token at http://localhost:4322/api/oauth/token with data: {'grant_type': 'authorization_code', 'code': '3f6492f4b624be6528bb90f5d324aa2d82d88c214686b9b3c433c7834ea5ba58', 'client_id': '29f313fea1d8d39653453ce1fdbd4be1', 'client_secret': '3635875c7bb1d42934877323c2686639042e766f155e406f8f64fb2dc3d466bf', 'redirect_uri': 'http://localhost:9000/oauth/callback'}
INFO:taskmanager_oauth_provider:Token response from TaskManager: {'access_token': 'eec7d8379e3f5a71b483b60ca1d95e509649f1dea111580b1342ee5e179cff6b', 'token_type': 'Bearer', 'expires_in': 3600, 'refresh_token': 'fd77c1a386625c8993516da00b6d9300aba56f7450feb10089f18eb269ab0613', 'scope': 'read'}
INFO:taskmanager_oauth_provider:Successfully exchanged code for access token
INFO:     127.0.0.1:38190 - "GET /oauth/callback?code=3f6492f4b624be6528bb90f5d324aa2d82d88c214686b9b3c433c7834ea5ba58&state=vhessLRjzrvm3VGkMep7Nr3swx67AYp2iYBKqT5ncNA HTTP/1.1" 302 Found
INFO:taskmanager_oauth_provider:Issued MCP access token for client ec3bc0f1-58ee-454a-858d-4ff75a22ff7b
INFO:     ::1:38374 - "POST /token HTTP/1.1" 200 OK
INFO:     ::1:38388 - "POST /introspect HTTP/1.1" 200 OK
INFO:     ::1:38400 - "POST /introspect HTTP/1.1" 200 OK
INFO:     ::1:45366 - "POST /mcp HTTP/1.1" 404 Not Found
